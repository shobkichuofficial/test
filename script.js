// --- Google Sheet Web App URL ---
const SPREADSHEET_URL = "https://script.google.com/macros/s/AKfycbzQCjKrtEMu4jj5ppWnnuMpJrOSIkKDVakGgwOeQUfyWWq0lsns14kLd0gMcd0HDS91/exec"; 

// --- Product Data ---
const PRODUCTS = [
  {
    id: "balachao_1kg",
    name: "ржЪрж┐ржВржбрж╝рж┐ ржмрж╛рж▓рж╛ржЪрж╛ржУ (1 ржХрзЗржЬрж┐)",
    price: 1099,
    image: "assets/prodact6.jpg",
    description: "ржмрж┐рж╢рзЗрж╖ ржЕржлрж╛рж░! рзз ржХрзЗржЬрж┐рж░ ржПржЗ ржкрзНржпрж╛ржХрзЗ ржкрж╛ржЪрзНржЫрзЗржи ржлрзНрж░рж┐ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐!",
    features: ["ржлрзНрж░рзЗрж╢ ржбрзНрж░рж╛ржЗ ржЪрж┐ржВржбрж╝рж┐", "ржЖрж╕рж▓ ржорж╕рж▓рж╛", "ржЭрж╛ржБржЬрж╛рж▓рзЛ рж╕рзНржмрж╛ржж", "рж╣рзЛржоржорзЗржб ржлрзНрж▓рзЗржнрж╛рж░", "ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ ржлрзНрж░рж┐"],
    freeDelivery: true
  },
  {
    id: "balachao_800g",
    name: "ржЪрж┐ржВржбрж╝рж┐ ржмрж╛рж▓рж╛ржЪрж╛ржУ (800 ржЧрзНрж░рж╛ржо)",
    price: 899,
    image: "assets/prodact5.jpg",
    description: "ржмрж┐рж╢рзЗрж╖ ржЕржлрж╛рж░! рзорзжрзж ржЧрзНрж░рж╛ржорзЗрж░ ржПржЗ ржкрзНржпрж╛ржХрзЗ ржкрж╛ржЪрзНржЫрзЗржи ржлрзНрж░рж┐ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐!",
    features: ["ржлрзНрж░рзЗрж╢ ржбрзНрж░рж╛ржЗ ржЪрж┐ржВржбрж╝рж┐", "ржЖрж╕рж▓ ржорж╕рж▓рж╛", "ржЭрж╛ржБржЬрж╛рж▓рзЛ рж╕рзНржмрж╛ржж", "рж╣рзЛржоржорзЗржб ржлрзНрж▓рзЗржнрж╛рж░", "ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ ржлрзНрж░рж┐"],
    freeDelivery: true
  },
  {
    id: "balachao_500g",
    name: "ржЪрж┐ржВржбрж╝рж┐ ржмрж╛рж▓рж╛ржЪрж╛ржУ (500 ржЧрзНрж░рж╛ржо)",
    price: 649,
    image: "assets/prodact4.jpg",
    description: "ржмрж┐рж╢рзЗрж╖ ржЕржлрж╛рж░! рзлрзжрзж ржЧрзНрж░рж╛ржорзЗрж░ ржПржЗ ржкрзНржпрж╛ржХрзЗ ржкрж╛ржЪрзНржЫрзЗржи ржлрзНрж░рж┐ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐!",
    features: ["ржлрзНрж░рзЗрж╢ ржбрзНрж░рж╛ржЗ ржЪрж┐ржВржбрж╝рж┐", "ржЖрж╕рж▓ ржорж╕рж▓рж╛", "ржЭрж╛ржБржЬрж╛рж▓рзЛ рж╕рзНржмрж╛ржж", "рж╣рзЛржоржорзЗржб ржлрзНрж▓рзЗржнрж╛рж░", "ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ ржлрзНрж░рж┐"],
    freeDelivery: true
  },
  {
    id: "balachao_300g",
    name: "ржЪрж┐ржВржбрж╝рж┐ ржмрж╛рж▓рж╛ржЪрж╛ржУ (300 ржЧрзНрж░рж╛ржо)",
    price: 350,
    image: "assets/prodact3.jpg",
    description: "ржирждрзБржи ржЕржлрж╛рж░! рзйрзжрзж ржЧрзНрж░рж╛ржорзЗрж░ ржкрзНржпрж╛ржХрзЗ ржЭрж╛рж▓рзЗрж░ рж╕рзНржмрж╛ржж ржЖрж░ ржЦрж╛ржБржЯрж┐ ржЪрж┐ржВржбрж╝рж┐рж░ ржЕржиржирзНржп рж╕ржВржорж┐рж╢рзНрж░ржгред",
    features: ["ржлрзНрж░рзЗрж╢ ржбрзНрж░рж╛ржЗ ржЪрж┐ржВржбрж╝рж┐", "ржЖрж╕рж▓ ржорж╕рж▓рж╛", "ржЭрж╛ржБржЬрж╛рж▓рзЛ рж╕рзНржмрж╛ржж", "рж╣рзЛржоржорзЗржб ржлрзНрж▓рзЗржнрж╛рж░", "ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ ржкрзНрж░ржпрзЛржЬрзНржп"],
    freeDelivery: false
  },
  {
    id: "balachao_150g",
    name: "ржЪрж┐ржВржбрж╝рж┐ ржмрж╛рж▓рж╛ржЪрж╛ржУ (150 ржЧрзНрж░рж╛ржо)",
    price: 195,
    image: "assets/prodact_150.jpg",
    description: "ржЭрж╛рж▓рзЗрж░ рж╕рзНржмрж╛ржж ржЖрж░ ржЦрж╛ржБржЯрж┐ ржЪрж┐ржВржбрж╝рж┐рж░ ржЕржиржирзНржп рж╕ржВржорж┐рж╢рзНрж░ржгред ржШрж░рзЗ ржмрж╕рзЗржЗ ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржиред",
    features: ["ржлрзНрж░рзЗрж╢ ржбрзНрж░рж╛ржЗ ржЪрж┐ржВржбрж╝рж┐", "ржЖрж╕рж▓ ржорж╕рж▓рж╛", "ржЭрж╛ржБржЬрж╛рж▓рзЛ рж╕рзНржмрж╛ржж", "рж╣рзЛржоржорзЗржб ржлрзНрж▓рзЗржнрж╛рж░", "ржЙржирзНржирждржорж╛ржирзЗрж░ ржЙржкрж╛ржжрж╛ржи"],
    freeDelivery: false
  },
  {
    id: "balachao_250g",
    name: "ржЪрж┐ржВржбрж╝рж┐ ржмрж╛рж▓рж╛ржЪрж╛ржУ (250 ржЧрзНрж░рж╛ржо)",
    price: 310,
    image: "assets/prodact_250.jpg",
    description: "ржмржбрж╝ ржкрзНржпрж╛ржХ, ржмржбрж╝ рж╕рзНржмрж╛ржжред ржкрж░рж┐ржмрж╛рж░рзЗрж░ ржЬржирзНржп ржЙржкржпрзБржХрзНрждред ржШрж░рзЗ ржмрж╕рзЗржЗ ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржиред",
    features: ["ржлрзНрж░рзЗрж╢ ржбрзНрж░рж╛ржЗ ржЪрж┐ржВржбрж╝рж┐", "ржЖрж╕рж▓ ржорж╕рж▓рж╛", "ржЭрж╛ржБржЬрж╛рж▓рзЛ рж╕рзНржмрж╛ржж", "рж╣рзЛржоржорзЗржб ржлрзНрж▓рзЗржнрж╛рж░", "ржЙржирзНржирждржорж╛ржирзЗрж░ ржЙржкрж╛ржжрж╛ржи"],
    freeDelivery: false
  }
];

// --- Bangladesh Divisions and Districts Data ---
const DIVISIONS_AND_DISTRICTS = {
  "ржврж╛ржХрж╛": ["ржврж╛ржХрж╛", "ржЧрж╛ржЬрзАржкрзБрж░", "ржХрж┐рж╢рзЛрж░ржЧржЮрзНржЬ", "ржорж╛ржирж┐ржХржЧржЮрзНржЬ", "ржорзБржирзНрж╕рж┐ржЧржЮрзНржЬ", "ржирж╛рж░рж╛ржпрж╝ржгржЧржЮрзНржЬ", "ржирж░рж╕рж┐ржВржжрзА", "ржЯрж╛ржЩрзНржЧрж╛ржЗрж▓", "ржлрж░рж┐ржжржкрзБрж░", "ржЧрзЛржкрж╛рж▓ржЧржЮрзНржЬ", "ржорж╛ржжрж╛рж░рзАржкрзБрж░", "рж░рж╛ржЬржмрж╛ржбрж╝рзА", "рж╢рж░рзАржпрж╝рждржкрзБрж░"],
  "ржЪржЯрзНржЯржЧрзНрж░рж╛ржо": ["ржмрж╛ржирзНржжрж░ржмрж╛ржи", "ржмрзНрж░рж╛рж╣рзНржоржгржмрж╛ржбрж╝рж┐ржпрж╝рж╛", "ржЪрж╛ржБржжржкрзБрж░", "ржЪржЯрзНржЯржЧрзНрж░рж╛ржо", "ржХрзБржорж┐рж▓рзНрж▓рж╛", "ржХржХрзНрж╕ржмрж╛ржЬрж╛рж░", "ржлрзЗржирзА", "ржЦрж╛ржЧржбрж╝рж╛ржЫржбрж╝рж┐", "рж▓ржХрзНрж╖рзНржорзАржкрзБрж░", "ржирзЛржпрж╝рж╛ржЦрж╛рж▓рзА", "рж░рж╛ржЩрзНржЧрж╛ржорж╛ржЯрж┐"],
  "ржЦрзБрж▓ржирж╛": ["ржмрж╛ржЧрзЗрж░рж╣рж╛ржЯ", "ржЪрзБржпрж╝рж╛ржбрж╛ржЩрзНржЧрж╛", "ржпрж╢рзЛрж░", "ржЭрж┐ржирж╛ржЗржжрж╣", "ржЦрзБрж▓ржирж╛", "ржХрзБрж╖рзНржЯрж┐ржпрж╝рж╛", "ржорж╛ржЧрзБрж░рж╛", "ржорзЗрж╣рзЗрж░ржкрзБрж░", "ржиржбрж╝рж╛ржЗрж▓", "рж╕рж╛рждржХрзНрж╖рзАрж░рж╛"],
  "рж░рж╛ржЬрж╢рж╛рж╣рзА": ["ржмржЧрзБржбрж╝рж╛", "ржЪрж╛ржБржкрж╛ржЗржиржмрж╛ржмржЧржЮрзНржЬ", "ржЬржпрж╝ржкрзБрж░рж╣рж╛ржЯ", "ржиржУржЧрж╛ржБ", "ржирж╛ржЯрзЛрж░", "ржкрж╛ржмржирж╛", "рж░рж╛ржЬрж╢рж╛рж╣рзА", "рж╕рж┐рж░рж╛ржЬржЧржЮрзНржЬ"],
  "ржмрж░рж┐рж╢рж╛рж▓": ["ржмрж░ржЧрзБржирж╛", "ржмрж░рж┐рж╢рж╛рж▓", "ржнрзЛрж▓рж╛", "ржЭрж╛рж▓ржХрж╛ржарж┐", "ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА", "ржкрж┐рж░рзЛржЬржкрзБрж░"],
  "рж╕рж┐рж▓рзЗржЯ": ["рж╣ржмрж┐ржЧржЮрзНржЬ", "ржорзМрж▓ржнрзАржмрж╛ржЬрж╛рж░", "рж╕рзБржирж╛ржоржЧржЮрзНржЬ", "рж╕рж┐рж▓рзЗржЯ"],
  "рж░ржВржкрзБрж░": ["ржжрж┐ржирж╛ржЬржкрзБрж░", "ржЧрж╛ржЗржмрж╛ржирзНржзрж╛", "ржХрзБржбрж╝рж┐ржЧрзНрж░рж╛ржо", "рж▓рж╛рж▓ржоржирж┐рж░рж╣рж╛ржЯ", "ржирзАрж▓ржлрж╛ржорж╛рж░рзА", "ржкржЮрзНржЪржЧржбрж╝", "рж░ржВржкрзБрж░", "ржарж╛ржХрзБрж░ржЧрж╛ржБржУ"],
  "ржоржпрж╝ржоржирж╕рж┐ржВрж╣": ["ржЬрж╛ржорж╛рж▓ржкрзБрж░", "ржоржпрж╝ржоржирж╕рж┐ржВрж╣", "ржирзЗрждрзНрж░ржХрзЛржирж╛", "рж╢рзЗрж░ржкрзБрж░"]
};

// --- Districts and Thanas/Upazilas Data ---
const DISTRICTS_AND_THANAS = {
    // ржврж╛ржХрж╛ ржмрж┐ржнрж╛ржЧ
    "ржврж╛ржХрж╛": ["рж░ржоржирж╛", "ржорждрж┐ржЭрж┐рж▓", "ржХрзЛрждрзЛржпрж╝рж╛рж▓рзА", "рж╕рзВрждрзНрж░рж╛ржкрзБрж░", "ржзрж╛ржиржоржирзНржбрж┐", "ржорзЛрж╣рж╛ржорзНржоржжржкрзБрж░", "рждрзЗржЬржЧрж╛ржБржУ", "ржЧрзБрж▓рж╢рж╛ржи", "рж▓рж╛рж▓ржмрж╛ржЧ", "ржорж┐рж░ржкрзБрж░", "ржкрж▓рзНрж▓ржмрзА", "рж╕ржмрзБржЬржмрж╛ржЧ", "ржХрзНржпрж╛ржирзНржЯржиржорзЗржирзНржЯ", "ржбрзЗржорж░рж╛", "рж╣рж╛ржЬрж╛рж░рзАржмрж╛ржЧ", "рж╢рзНржпрж╛ржоржкрзБрж░", "ржмрж╛ржбрзНржбрж╛", "ржХрж╛ржорж░рж╛ржЩрзНржЧрзАрж░ржЪрж░", "ржЦрж┐рж▓ржЧрж╛ржБржУ", "ржЙрждрзНрждрж░рж╛"],
    "ржЧрж╛ржЬрзАржкрзБрж░": ["ржЧрж╛ржЬрзАржкрзБрж░ рж╕ржжрж░", "ржХрж╛рж▓рж┐ржпрж╝рж╛ржХрзИрж░", "ржХрж╛рж▓рзАржЧржЮрзНржЬ", "ржХрж╛ржкрж╛рж╕рж┐ржпрж╝рж╛", "рж╢рзНрж░рзАржкрзБрж░"],
    "ржХрж┐рж╢рзЛрж░ржЧржЮрзНржЬ": ["ржХрж┐рж╢рзЛрж░ржЧржЮрзНржЬ рж╕ржжрж░", "ржЕрж╖рзНржЯржЧрзНрж░рж╛ржо", "ржмрж╛ржЬрж┐рждржкрзБрж░", "ржнрзИрж░ржм", "рж╣рзЛрж╕рзЗржиржкрзБрж░", "ржЗржЯржирж╛", "ржХрж░рж┐ржоржЧржЮрзНржЬ", "ржХржЯрж┐ржпрж╝рж╛ржжрзА", "ржХрзБрж▓рж┐рзЯрж╛рж░ржЪрж░", "ржорж┐ржарж╛ржоржЗржи", "ржирж┐ржХрж▓рзА", "ржкрж╛ржХрзБржирзНржжрж┐рзЯрж╛", "рждрж╛рзЬрж╛ржЗрж▓"],
    "ржорж╛ржирж┐ржХржЧржЮрзНржЬ": ["ржорж╛ржирж┐ржХржЧржЮрзНржЬ рж╕ржжрж░", "ржжрзМрж▓рждржкрзБрж░", "ржШрж┐ржУрж░", "рж╣рж░рж┐рж░рж╛ржоржкрзБрж░", "рж╕рж╛ржЯрзБрж░рж┐ржпрж╝рж╛", "рж╢рж┐ржмрж╛рж▓ржпрж╝", "рж╕рж┐ржЩрзНржЧрж╛ржЗрж░"],
    "ржорзБржирзНрж╕рж┐ржЧржЮрзНржЬ": ["ржорзБржирзНрж╕рж┐ржЧржЮрзНржЬ рж╕ржжрж░", "ржЧржЬрж╛рж░рж┐ржпрж╝рж╛", "рж▓рзМрж╣ржЬржВ", "рж╕рж┐рж░рж╛ржЬржжрж┐ржЦрж╛ржи", "рж╢рзНрж░рзАржиржЧрж░", "ржЯржЩрзНржЧрж┐ржмрж╛ржбрж╝рзА"],
    "ржирж╛рж░рж╛ржпрж╝ржгржЧржЮрзНржЬ": ["ржирж╛рж░рж╛ржпрж╝ржгржЧржЮрзНржЬ рж╕ржжрж░", "ржЖржбрж╝рж╛ржЗрж╣рж╛ржЬрж╛рж░", "ржмржирзНржжрж░", "рж░рзВржкржЧржЮрзНржЬ", "рж╕рж┐ржжрзНржзрж┐рж░ржЧржЮрзНржЬ", "рж╕рзЛржирж╛рж░ржЧрж╛ржБржУ"],
    "ржирж░рж╕рж┐ржВржжрзА": ["ржирж░рж╕рж┐ржВржжрзА рж╕ржжрж░", "ржмрзЗрж▓рж╛ржмрзЛ", "ржоржирзЛрж╣рж░ржжрзА", "ржкрж▓рж╛рж╢", "рж░рж╛ржпрж╝ржкрзБрж░рж╛", "рж╢рж┐ржмржкрзБрж░"],
    "ржЯрж╛ржЩрзНржЧрж╛ржЗрж▓": ["ржЯрж╛ржЩрзНржЧрж╛ржЗрж▓ рж╕ржжрж░", "ржмрж╛рж╕рж╛ржЗрж▓", "ржнрзБржЮрж╛ржкрзБрж░", "ржжрзЗрж▓ржжрзБржпрж╝рж╛рж░", "ржШрж╛ржЯрж╛ржЗрж▓", "ржЧрзЛржкрж╛рж▓ржкрзБрж░", "ржХрж╛рж▓рж┐рж╣рж╛рждрзА", "ржоржзрзБржкрзБрж░", "ржорж┐рж░рзНржЬрж╛ржкрзБрж░", "ржирж╛ржЧрж░ржкрзБрж░", "рж╕ржЦрж┐ржкрзБрж░", "ржзржиржмрж╛ржбрж╝рзА"],
    "ржлрж░рж┐ржжржкрзБрж░": ["ржлрж░рж┐ржжржкрзБрж░ рж╕ржжрж░", "ржЖрж▓ржлрж╛ржбрж╛ржЩрзНржЧрж╛", "ржнрж╛ржЩрзНржЧрж╛", "ржмрзЛржпрж╝рж╛рж▓ржорж╛рж░рзА", "ржЪрж░ржнржжрзНрж░рж╛рж╕ржи", "ржоржзрзБржЦрж╛рж▓рзА", "ржиржЧрж░ржХрж╛ржирзНржжрж╛", "рж╕ржжрж░ржкрзБрж░", "рж╕рж╛рж▓ржерж╛"],
    "ржЧрзЛржкрж╛рж▓ржЧржЮрзНржЬ": ["ржЧрзЛржкрж╛рж▓ржЧржЮрзНржЬ рж╕ржжрж░", "ржХрж╛рж╢рж┐ржпрж╝рж╛ржирзА", "ржХрзЛржЯрж╛рж▓рзАржкрж╛ржбрж╝рж╛", "ржорзБржХрж╕рзБржжржкрзБрж░", "ржЯрзБржЩрзНржЧрж┐ржкрж╛ржбрж╝рж╛"],
    "ржорж╛ржжрж╛рж░рзАржкрзБрж░": ["ржорж╛ржжрж╛рж░рзАржкрзБрж░ рж╕ржжрж░", "ржХрж╛рж▓ржХрж┐ржирж┐", "рж░рж╛ржЬрзИрж░", "рж╢рж┐ржмржЪрж░"],
    "рж░рж╛ржЬржмрж╛ржбрж╝рзА": ["рж░рж╛ржЬржмрж╛ржбрж╝рзА рж╕ржжрж░", "ржмрж╛рж▓рж┐ржпрж╝рж╛ржХрж╛ржирзНржжрж┐", "ржЧрзЛржпрж╝рж╛рж▓ржирзНржж", "ржкрж╛ржВрж╢рж╛", "ржХрж╛рж▓рзБржЦрж╛рж▓рзА"],
    "рж╢рж░рзАржпрж╝рждржкрзБрж░": ["рж╢рж░рзАржпрж╝рждржкрзБрж░ рж╕ржжрж░", "ржнрзЗржжрж░ржЧржЮрзНржЬ", "ржбрж╛ржорзБржбрзНржпрж╛", "ржЧрзЛрж╕рж╛ржЗрж░рж╣рж╛ржЯ", "ржиржбрж╝рж┐ржпрж╝рж╛", "ржЬрж╛ржЬрж┐рж░рж╛"],
    // ржЪржЯрзНржЯржЧрзНрж░рж╛ржо ржмрж┐ржнрж╛ржЧ
    "ржмрж╛ржирзНржжрж░ржмрж╛ржи": ["ржмрж╛ржирзНржжрж░ржмрж╛ржи рж╕ржжрж░", "ржЖрж▓рзАржХржжржо", "рж▓рж╛ржорж╛", "ржирж╛ржЗржХрзНрж╖рзНржпржВржЫржбрж╝рж┐", "рж░рзЛржпрж╝рж╛ржВржЫржбрж╝рж┐", "рж░рзБржорж╛", "ржерж╛ржиржЪрж┐"],
    "ржмрзНрж░рж╛рж╣рзНржоржгржмрж╛ржбрж╝рж┐ржпрж╝рж╛": ["ржмрзНрж░рж╛рж╣рзНржоржгржмрж╛ржбрж╝рж┐ржпрж╝рж╛ рж╕ржжрж░", "ржЖржЦрж╛ржЙржбрж╝рж╛", "ржЖрж╢рзБржЧржЮрзНржЬ", "ржмрж╛ржЮрзНржЫрж╛рж░рж╛ржоржкрзБрж░", "ржХрж╕ржмрж╛", "ржиржмрзАржиржЧрж░", "ржирж╛рж╕рж┐рж░ржиржЧрж░", "рж╕рж░рж╛ржЗрж▓", "ржмрж┐ржЬржпрж╝ржиржЧрж░"],
    "ржЪрж╛ржБржжржкрзБрж░": ["ржЪрж╛ржБржжржкрзБрж░ рж╕ржжрж░", "ржлрж░рж┐ржжржЧржЮрзНржЬ", "рж╣рж╛ржЗржоржЪрж░", "рж╣рж╛ржЬрзАржЧржЮрзНржЬ", "ржХржЪрзБржпрж╝рж╛", "ржорждрж▓ржм ржЙрждрзНрждрж░", "ржорждрж▓ржм ржжржХрзНрж╖рж┐ржг", "рж╢рж╛рж╣рж░рж╛рж╕рзНрждрж┐"],
    "ржЪржЯрзНржЯржЧрзНрж░рж╛ржо": ["ржЖржирзЛржпрж╝рж╛рж░рж╛", "ржмрж╛ржБрж╢ржЦрж╛рж▓рзА", "ржмрзЛржпрж╝рж╛рж▓ржЦрж╛рж▓рзА", "ржЪржирзНржжржирж╛ржЗрж╢", "ржлржЯрж┐ржХржЫржбрж╝рж┐", "рж╣рж╛ржЯрж╣рж╛ржЬрж╛рж░рзА", "ржХрж░рзНржгржлрзБрж▓рзА", "рж▓рзЛрж╣рж╛ржЧржбрж╝рж╛", "ржорзАрж░рж╕рж░рж╛ржЗ", "ржкржЯрж┐ржпрж╝рж╛", "рж░рж╛ржЩрзНржЧрзБржирж┐ржпрж╝рж╛", "рж░рж╛ржЙржЬрж╛ржи", "рж╕ржирзНржжрзНржмрзАржк", "рж╕рж╛рждржХрж╛ржирж┐ржпрж╝рж╛", "рж╕рзАрждрж╛ржХрзБржгрзНржб"],
    "ржХрзБржорж┐рж▓рзНрж▓рж╛": ["ржХрзБржорж┐рж▓рзНрж▓рж╛ рж╕ржжрж░", "ржмрж░рзБржбрж╝рж╛", "ржмрзНрж░рж╛рж╣рзНржоржгржкрж╛ржбрж╝рж╛", "ржмрзБржбрж╝рж┐ржЪржВ", "ржЪрж╛ржирзНржжрж┐ржирж╛", "ржЪрзМржжрзНржжржЧрзНрж░рж╛ржо", "ржжрж╛ржЙржжржХрж╛ржирзНржжрж┐", "ржжрзЗржмрзАржжрзНржмрж╛рж░", "рж╣рзЛржоржирж╛", "рж▓рж╛ржХрж╕рж╛ржо", "ржоржирзЛрж╣рж░ржЧржЮрзНржЬ", "ржорзЗржШржирж╛", "ржорзБрж░рж╛ржжржиржЧрж░", "ржирж╛ржЩрзНржЧрж▓ржХрзЛржЯ", "рждрж┐рждрж╛рж╕"],
    "ржХржХрзНрж╕ржмрж╛ржЬрж╛рж░": ["ржХржХрзНрж╕ржмрж╛ржЬрж╛рж░ рж╕ржжрж░", "ржЪржХрж░рж┐ржпрж╝рж╛", "ржХрзБрждрзБржмржжрж┐ржпрж╝рж╛", "ржорж╣рзЗрж╢ржЦрж╛рж▓рзА", "ржкрзЗржХрзБржпрж╝рж╛", "рж░рж╛ржорзБ", "ржЯрзЗржХржирж╛ржл", "ржЙржЦрж┐ржпрж╝рж╛"],
    "ржлрзЗржирзА": ["ржлрзЗржирзА рж╕ржжрж░", "ржЫрж╛ржЧрж▓ржирж╛ржЗржпрж╝рж╛", "ржжрж╛ржЧржиржнрзВржЮрж╛", "ржкрж░рж╢рзБрж░рж╛ржо", "рж╕рзЛржирж╛ржЧрж╛ржЬрзА", "ржлрзБрж▓ржЧрж╛ржЬрзА"],
    "ржЦрж╛ржЧржбрж╝рж╛ржЫржбрж╝рж┐": ["ржЦрж╛ржЧржбрж╝рж╛ржЫржбрж╝рж┐ рж╕ржжрж░", "ржжрзАржШрж┐ржирж╛рж▓рж╛", "рж▓ржХрзНрж╖рзНржорзАржЫржбрж╝рж┐", "ржорж╣рж╛рж▓ржЫржбрж╝рж┐", "ржорж╛ржирж┐ржХржЫржбрж╝рж┐", "ржорж╛ржЯрж┐рж░рж╛ржЩрзНржЧрж╛", "ржкрж╛ржиржЫржбрж╝рж┐", "рж░рж╛ржоржЧржбрж╝"],
    "рж▓ржХрзНрж╖рзНржорзАржкрзБрж░": ["рж▓ржХрзНрж╖рзНржорзАржкрзБрж░ рж╕ржжрж░", "ржХржорж▓ржиржЧрж░", "рж░рж╛ржпрж╝ржкрзБрж░", "рж░рж╛ржоржЧржЮрзНржЬ", "рж░рж╛ржоржЧрждрж┐"],
    "ржирзЛржпрж╝рж╛ржЦрж╛рж▓рзА": ["ржирзЛржпрж╝рж╛ржЦрж╛рж▓рзА рж╕ржжрж░", "ржмрзЗржЧржоржЧржЮрзНржЬ", "ржЪрж╛ржЯржЦрж┐рж▓", "ржХрзЛржорзНржкрж╛ржирзАржЧржЮрзНржЬ", "рж╣рж╛рждрж┐ржпрж╝рж╛", "рж╕рзЗржиржмрж╛ржЧ", "рж╕рзБржмрж░рзНржгржЪрж░", "ржХржмрж┐рж░рж╣рж╛ржЯ"],
    "рж░рж╛ржЩрзНржЧрж╛ржорж╛ржЯрж┐": ["рж░рж╛ржЩрзНржЧрж╛ржорж╛ржЯрж┐ рж╕ржжрж░", "ржмрж╛ржШрж╛ржЗржЫржбрж╝рж┐", "ржмрж░ржХрж▓", "ржХрж╛ржкрзНрждрж╛ржЗ", "ржЬрзБрж░рж╛ржЫржбрж╝рж┐", "рж▓ржВржЧржжрзБ", "ржирж╛ржирж┐ржпрж╝рж╛рж░ржЪрж░", "рж░рж╛ржЬрж╕рзНржерж▓рзА", "ржмрж┐рж▓рж╛ржЗржЫржбрж╝рж┐", "ржХрж╛ржЙржиржЦрж╛рж▓рзА"],
    // ржЦрзБрж▓ржирж╛ ржмрж┐ржнрж╛ржЧ
    "ржмрж╛ржЧрзЗрж░рж╣рж╛ржЯ": ["ржмрж╛ржЧрзЗрж░рж╣рж╛ржЯ рж╕ржжрж░", "ржЪрж┐рждрж▓ржорж╛рж░рзА", "ржлржХрж┐рж░рж╣рж╛ржЯ", "ржХржЪрзБржпрж╝рж╛", "ржорзЛрж▓рзНрж▓рж╛рж╣рж╛ржЯ", "ржорзЛржВрж▓рж╛", "ржорзЛрж░рзЗрж▓ржЧржЮрзНржЬ", "рж░рж╛ржоржкрж╛рж▓", "рж╢рж░ржгржЦрзЛрж▓рж╛"],
    "ржЪрзБржпрж╝рж╛ржбрж╛ржЩрзНржЧрж╛": ["ржЪрзБржпрж╝рж╛ржбрж╛ржЩрзНржЧрж╛ рж╕ржжрж░", "ржЖрж▓ржоржбрж╛ржЩрзНржЧрж╛", "ржжрж╛ржорзБржбрж╝рж╣рзБржжрж╛", "ржЬрзАржмржиржиржЧрж░"],
    "ржпрж╢рзЛрж░": ["ржпрж╢рзЛрж░ рж╕ржжрж░", "ржЕржнржпрж╝ржиржЧрж░", "ржмрж╛ржШрж╛рж░ржкрж╛ржбрж╝рж╛", "ржЪрзМржЧрж╛ржЫрж╛", "ржЭрж┐ржХрж░ржЧрж╛ржЫрж╛", "ржХрзЗрж╢ржмржкрзБрж░", "ржоржгрж┐рж░рж╛ржоржкрзБрж░", "рж╢рж╛рж░рзНрж╢рж╛"],
    "ржЭрж┐ржирж╛ржЗржжрж╣": ["ржЭрж┐ржирж╛ржЗржжрж╣ рж╕ржжрж░", "рж╣рж░рж┐ржгрж╛ржХрзБржгрзНржбрзБ", "ржХрж╛рж▓рзАржЧржЮрзНржЬ", "ржХрзЛржЯржЪрж╛ржБржжржкрзБрж░", "ржорж╣рзЗрж╢ржкрзБрж░", "рж╢рзИрж▓ржХрзБржкрж╛"],
    "ржЦрзБрж▓ржирж╛": ["ржбрзБржорзБрж░рж┐ржпрж╝рж╛", "ржмржЯрж┐ржпрж╝рж╛ржШрж╛ржЯрж╛", "ржжрж╛ржХрзЛржк", "ржжрж┐ржШрж▓рж┐ржпрж╝рж╛", "ржХржпрж╝рж░рж╛", "ржкрж╛ржЗржХржЧрж╛ржЫрж╛", "ржлрзБрж▓рждрж▓рж╛", "рж░рзВржкрж╕рж╛", "рждрзЗрж░ржЦрж╛ржжрж╛"],
    "ржХрзБрж╖рзНржЯрж┐ржпрж╝рж╛": ["ржХрзБрж╖рзНржЯрж┐ржпрж╝рж╛ рж╕ржжрж░", "ржнрзЗржбрж╝рж╛ржорж╛рж░рж╛", "ржжрзМрж▓рждржкрзБрж░", "ржХрзБржорж╛рж░ржЦрж╛рж▓рзА", "ржЦрзЛржХрж╕рж╛", "ржорж┐рж░ржкрзБрж░"],
    "ржорж╛ржЧрзБрж░рж╛": ["ржорж╛ржЧрзБрж░рж╛ рж╕ржжрж░", "ржорж╣ржорзНржоржжржкрзБрж░", "рж╢рж╛рж▓рж┐ржЦрж╛", "рж╢рзНрж░рзАржкрзБрж░"],
    "ржорзЗрж╣рзЗрж░ржкрзБрж░": ["ржорзЗрж╣рзЗрж░ржкрзБрж░ рж╕ржжрж░", "ржЧрж╛ржВржирзА", "ржорзБржЬрж┐ржмржиржЧрж░"],
    "ржиржбрж╝рж╛ржЗрж▓": ["ржиржбрж╝рж╛ржЗрж▓ рж╕ржжрж░", "ржХрж╛рж▓рж┐ржпрж╝рж╛", "рж▓рзЛрж╣рж╛ржЧржбрж╝рж╛"],
    "рж╕рж╛рждржХрзНрж╖рзАрж░рж╛": ["рж╕рж╛рждржХрзНрж╖рзАрж░рж╛ рж╕ржжрж░", "ржХрж▓рж╛рж░рзЛржпрж╝рж╛", "ржЖрж╢рж╛рж╢рзБржирж┐", "ржжрзЗржмрж╣рж╛ржЯрж╛", "ржХрж╛рж▓рж┐ржЧржЮрзНржЬ", "рж╢рзНржпрж╛ржоржиржЧрж░", "рждрж╛рж▓рж╛"],
    // рж░рж╛ржЬрж╢рж╛рж╣рзА ржмрж┐ржнрж╛ржЧ
    "ржмржЧрзБржбрж╝рж╛": ["ржмржЧрзБржбрж╝рж╛ рж╕ржжрж░", "ржЖржжржоржжрзАржШрж┐", "ржзрзБржиржЯ", "ржжрзБржкржЪрж╛ржБржЪрж┐ржпрж╝рж╛", "ржЧрж╛ржмрждрж▓рзА", "ржХрж╛рж╣рж╛рж▓рзБ", "ржиржирзНржжрзАржЧрзНрж░рж╛ржо", "рж╕рж╛рж░рж┐ржпрж╝рж╛ржХрж╛ржирзНржжрж┐", "рж╢рж╛ржЬрж╛рж╣рж╛ржиржкрзБрж░", "рж╢рзЗрж░ржкрзБрж░", "рж╢рж┐ржмржЧржЮрзНржЬ", "рж╕рзЛржирж╛рждрж▓рж╛"],
    "ржЪрж╛ржБржкрж╛ржЗржиржмрж╛ржмржЧржЮрзНржЬ": ["ржЪрж╛ржБржкрж╛ржЗржиржмрж╛ржмржЧржЮрзНржЬ рж╕ржжрж░", "ржЧрзЛржорж╕рзНрждрж╛ржкрзБрж░", "ржирж╛ржЪрзЛрж▓", "ржнрзЛрж▓рж╛рж╣рж╛ржЯ", "рж╢рж┐ржмржЧржЮрзНржЬ"],
    "ржЬржпрж╝ржкрзБрж░рж╣рж╛ржЯ": ["ржЬржпрж╝ржкрзБрж░рж╣рж╛ржЯ рж╕ржжрж░", "ржЖржХрзНржХрзЗрж▓ржкрзБрж░", "ржХрж╛рж▓рж╛ржЗ", "ржХрзНрж╖рзЗрждрж▓рж╛рж▓", "ржкрж╛ржБржЪржмрж┐ржмрж┐"],
    "ржиржУржЧрж╛ржБ": ["ржиржУржЧрж╛ржБ рж╕ржжрж░", "ржЖрждрзНрж░рж╛ржЗ", "ржмржжрж▓ржЧрж╛ржЫрзА", "ржзрж╛ржоржЗрж░рж╣рж╛ржЯ", "ржорж╛ржирзНржжрж╛", "ржорж╣рж╛ржжрзЗржмржкрзБрж░", "ржирж┐ржпрж╝рж╛ржорждржкрзБрж░", "ржкрждрзНржирзАрждрж▓рж╛", "ржкрзЛрж░рж╢рж╛", "рж░рж╛ржирзАржиржЧрж░", "рж╕рж╛ржкрж╛рж╣рж╛рж░"],
    "ржирж╛ржЯрзЛрж░": ["ржирж╛ржЯрзЛрж░ рж╕ржжрж░", "ржмрж╛ржЧрж╛рждрж┐ржкрж╛ржбрж╝рж╛", "ржмржбрж╝рж╛ржЗржЧрзНрж░рж╛ржо", "ржЧрзБрж░рзБржжрж╛рж╕ржкрзБрж░", "рж▓рж╛рж▓ржкрзБрж░", "рж╕рж┐ржВржбрж╝рж╛", "ржирж▓ржбрж╛ржЩрзНржЧрж╛"],
    "ржкрж╛ржмржирж╛": ["ржкрж╛ржмржирж╛ рж╕ржжрж░", "ржИрж╢рзНржмрж░ржжрзА", "ржЖржЯржШрж░рж┐ржпрж╝рж╛", "ржмрзЗржбрж╝рж╛", "ржнрж╛ржЩрзНржЧрзБржбрж╝рж╛", "ржЪрж╛ржЯржорзЛрж╣рж░", "ржлрж░рж┐ржжржкрзБрж░", "рж╕рж╛ржБржерж┐ржпрж╝рж╛", "рж╕рзБржЬрж╛ржиржЧрж░"],
    "рж░рж╛ржЬрж╢рж╛рж╣рзА": ["ржмрж╛ржШрж╛", "ржмрж╛ржЧржорж╛рж░рж╛", "ржЪрж╛рж░ржШрж╛ржЯ", "ржжрзБрж░рзНржЧрж╛ржкрзБрж░", "ржЧрзЛржжрж╛ржЧрж╛ржбрж╝рзА", "ржорзЛрж╣ржиржкрзБрж░", "ржкржмрж╛", "ржкрзБржарж┐ржпрж╝рж╛", "рждрж╛ржирзЛрж░"],
    "рж╕рж┐рж░рж╛ржЬржЧржЮрзНржЬ": ["рж╕рж┐рж░рж╛ржЬржЧржЮрзНржЬ рж╕ржжрж░", "ржмрзЗрж▓ржХрзБржЪрж┐", "ржЪрзМрж╣рж╛рж▓рзА", "ржХрж╛ржорж╛рж░ржЦржирзНржж", "ржХрж╛ржЬрзАржкрзБрж░", "рж░рж╛ржпрж╝ржЧржЮрзНржЬ", "рж╢рж╛рж╣ржЬрж╛ржжржкрзБрж░", "рждрж╛ржбрж╝рж╛рж╢", "ржЙрж▓рзНрж▓рж╛ржкрж╛ржбрж╝рж╛"],
    // ржмрж░рж┐рж╢рж╛рж▓ ржмрж┐ржнрж╛ржЧ
    "ржмрж░ржЧрзБржирж╛": ["ржмрж░ржЧрзБржирж╛ рж╕ржжрж░", "ржЖржорждрж▓рзА", "ржмрж╛ржоржирж╛", "ржмрзЗрждрж╛ржЧрзА", "ржкрж╛ржерж░ржШрж╛ржЯрж╛", "рждрж╛рж▓рждрж▓рзА"],
    "ржмрж░рж┐рж╢рж╛рж▓": ["ржмрж░рж┐рж╢рж╛рж▓ рж╕ржжрж░", "ржЖржЧрзИрж▓ржЭрж╛ржбрж╝рж╛", "ржмрж╛ржмрзБржЧржЮрзНржЬ", "ржмрж╛ржирж╛рж░рзАржкрж╛ржбрж╝рж╛", "ржЧрзМрж░ржиржжрзА", "рж╣рж┐ржЬрж▓рж╛", "ржорзЗрж╣рзЗржирзНржжрж┐ржЧржЮрзНржЬ", "ржорзБрж▓рж╛ржжрзА", "ржЙржЬрж┐рж░ржкрзБрж░", "ржмрж╛ржХрзЗрж░ржЧржЮрзНржЬ"],
    "ржнрзЛрж▓рж╛": ["ржнрзЛрж▓рж╛ рж╕ржжрж░", "ржмрзЛрж░рж╣рж╛ржиржЙржжрзНржжрж┐ржи", "ржЪрж░ржлрзНржпрж╛рж╢ржи", "ржжрзМрж▓рждржЦрж╛ржи", "рж▓рж╛рж▓ржорзЛрж╣ржи", "ржоржиржкрзБрж░рж╛", "рждржЬрзБржоржжрзНржжрж┐ржи"],
    "ржЭрж╛рж▓ржХрж╛ржарж┐": ["ржЭрж╛рж▓ржХрж╛ржарж┐ рж╕ржжрж░", "ржХрж╛ржБржарж╛рж▓рж┐ржпрж╝рж╛", "ржирж▓ржЫрж┐ржЯрж┐", "рж░рж╛ржЬрж╛ржкрзБрж░"],
    "ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА": ["ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА рж╕ржжрж░", "ржмрж╛ржЙржлрж▓", "ржжрж╢ржорж┐ржирж╛", "ржЧрж▓рж╛ржЪрж┐ржкрж╛", "ржХрж▓рж╛ржкрж╛ржбрж╝рж╛", "ржорж┐рж░рзНржЬрж╛ржЧржЮрзНржЬ", "ржжрзБржоржХрж┐", "рж░рж╛ржЩрзНржЧрж╛ржмрж╛рж▓рзА"],
    "ржкрж┐рж░рзЛржЬржкрзБрж░": ["ржкрж┐рж░рзЛржЬржкрзБрж░ рж╕ржжрж░", "ржнрж╛ржирзНржбрж╛рж░рж┐ржпрж╝рж╛", "ржХрж╛ржЙржЦрж╛рж▓рзА", "ржоржаржмрж╛ржбрж╝рж┐ржпрж╝рж╛", "ржирж╛ржЬрж┐рж░ржкрзБрж░", "ржирзЗрж╕рж╛рж░рзЗржмрж╛ржж (рж╕рзНржмрж░рзВржкржХрж╛ржарж┐)", "ржЗржирзНржжрзБрж░ржХрж╛ржирзА"],
    // рж╕рж┐рж▓рзЗржЯ ржмрж┐ржнрж╛ржЧ
    "рж╕рж┐рж▓рзЗржЯ": ["рж╕рж┐рж▓рзЗржЯ рж╕ржжрж░", "ржмрж╛рж▓рж╛ржЧржЮрзНржЬ", "ржмрж┐ржпрж╝рж╛ржирзАржмрж╛ржЬрж╛рж░", "ржХрзЛржорзНржкрж╛ржирзАржЧржЮрзНржЬ", "ржлрзЗржЮрзНржЪрзБржЧржЮрзНржЬ", "ржЧрзЛрж▓рж╛ржкржЧржЮрзНржЬ", "ржЧрзЛржпрж╝рж╛ржЗржиржШрж╛ржЯ", "ржЬрзИржирзНрждрж╛ржкрзБрж░", "ржХрж╛ржирж╛ржЗржШрж╛ржЯ", "ржжржХрзНрж╖рж┐ржг рж╕рзБрж░ржорж╛", "ржЬржХрж┐ржЧржЮрзНржЬ", "ржУрж╕ржорж╛ржирзА ржиржЧрж░"],
    "рж╣ржмрж┐ржЧржЮрзНржЬ": ["рж╣ржмрж┐ржЧржЮрзНржЬ рж╕ржжрж░", "ржЖржЬржорж┐рж░рзАржЧржЮрзНржЬ", "ржмрж╛ржирж┐ржпрж╝рж╛ржЪржВ", "ржмрж╛рж╣рзБржмрж▓", "ржЪрзБржирж╛рж░рзБржШрж╛ржЯ", "рж▓рж╛ржЦрж╛ржЗ", "ржорж╛ржзржмржкрзБрж░", "ржиржмрзАржЧржЮрзНржЬ"],
    "ржорзМрж▓ржнрзАржмрж╛ржЬрж╛рж░": ["ржорзМрж▓ржнрзАржмрж╛ржЬрж╛рж░ рж╕ржжрж░", "ржмржбрж╝рж▓рзЗржЦрж╛", "ржЬрзБржбрж╝рзА", "ржХржорж▓ржЧржЮрзНржЬ", "ржХрзБрж▓рж╛ржЙржбрж╝рж╛", "рж░рж╛ржЬржиржЧрж░", "рж╢рзНрж░рзАржоржЩрзНржЧрж▓"],
    "рж╕рзБржирж╛ржоржЧржЮрзНржЬ": ["рж╕рзБржирж╛ржоржЧржЮрзНржЬ рж╕ржжрж░", "ржмрж┐рж╢рзНржмржорзНржнрж░ржкрзБрж░", "ржЫрж╛рждржХ", "ржжрж┐рж░рж╛ржЗ", "ржзрж░рзНржоржкрж╛рж╢рж╛", "ржжрзЛржпрж╝рж╛рж░рж╛ржмрж╛ржЬрж╛рж░", "ржЬржЧржирзНржирж╛ржержкрзБрж░", "ржЬрж╛ржорж╛рж▓ржЧржЮрзНржЬ", "рж╢рж╛рж▓рзНрж▓рж╛", "рждрж╛рж╣рж┐рж░ржкрзБрж░", "ржжржХрзНрж╖рж┐ржг рж╕рзБржирж╛ржоржЧржЮрзНржЬ"],
    // рж░ржВржкрзБрж░ ржмрж┐ржнрж╛ржЧ
    "ржжрж┐ржирж╛ржЬржкрзБрж░": ["ржжрж┐ржирж╛ржЬржкрзБрж░ рж╕ржжрж░", "ржмрж┐рж░рж╛ржоржкрзБрж░", "ржмрзАрж░ржЧржЮрзНржЬ", "ржмрж┐рж░рж▓", "ржмрзЛржЪрж╛ржЧржЮрзНржЬ", "ржЪрж┐рж░рж┐рж░ржмржирзНржжрж░", "ржлрзБрж▓ржмрж╛ржбрж╝рзА", "ржШрзЛржбрж╝рж╛ржШрж╛ржЯ", "рж╣рж╛ржХрж┐ржоржкрзБрж░", "ржХрж╛рж╣рж╛рж░рзЛрж▓", "ржЦрж╛ржирж╕рж╛ржорж╛", "ржиржмрж╛ржмржЧржЮрзНржЬ", "ржкрж╛рж░рзНржмрждрзАржкрзБрж░"],
    "ржЧрж╛ржЗржмрж╛ржирзНржзрж╛": ["ржЧрж╛ржЗржмрж╛ржирзНржзрж╛ рж╕ржжрж░", "ржлрзБрж▓ржЫржбрж╝рж┐", "ржЧрзЛржмрж┐ржирзНржжржЧржЮрзНржЬ", "ржкрж▓рж╛рж╢ржмрж╛ржбрж╝рзА", "рж╕рж╛ржжрзБрж▓рзНрж▓рж╛ржкрзБрж░", "рж╕рж╛ржШрж╛ржЯрж╛", "рж╕рзБржирзНржжрж░ржЧржЮрзНржЬ"],
    "ржХрзБржбрж╝рж┐ржЧрзНрж░рж╛ржо": ["ржХрзБржбрж╝рж┐ржЧрзНрж░рж╛ржо рж╕ржжрж░", "ржнрзВрж░рзБржЩрзНржЧрж╛ржорж╛рж░рзА", "ржЪрж░ рж░рж╛ржЬрж┐ржмржкрзБрж░", "ржЪрж┐рж▓ржорж╛рж░рзА", "ржлрзБрж▓ржмрж╛ржбрж╝рзА", "ржирж╛ржЧрзЗрж╢рзНржмрж░рзА", "рж░рж╛ржЬрж╛рж░рж╣рж╛ржЯ", "рж░рзМржорж╛рж░рзА", "ржЙрж▓рж┐ржкрзБрж░"],
    "рж▓рж╛рж▓ржоржирж┐рж░рж╣рж╛ржЯ": ["рж▓рж╛рж▓ржоржирж┐рж░рж╣рж╛ржЯ рж╕ржжрж░", "ржЖржжрж┐рждржорж╛рж░рзА", "рж╣рж╛рждрзАржмрж╛ржирзНржзрж╛", "ржХрж╛рж▓рзАржЧржЮрзНржЬ", "ржкрж╛ржЯржЧрзНрж░рж╛ржо"],
    "ржирзАрж▓ржлрж╛ржорж╛рж░рзА": ["ржирзАрж▓ржлрж╛ржорж╛рж░рзА рж╕ржжрж░", "ржбрзЛржорж╛рж░", "ржбрж┐ржорж▓рж╛", "ржЬрж▓ржврж╛ржХрж╛", "ржХрж┐рж╢рзЛрж░ржЧржЮрзНржЬ", "рж╕рзИржпрж╝ржжржкрзБрж░"],
    "ржкржЮрзНржЪржЧржбрж╝": ["ржкржЮрзНржЪржЧржбрж╝ рж╕ржжрж░", "ржЖржЯрзЛржпрж╝рж╛рж░рзА", "ржмрзЛржжрж╛", "ржжрзЗржмрзАржЧржЮрзНржЬ", "рждрзЗржБрждрзБрж▓рж┐ржпрж╝рж╛"],
    "рж░ржВржкрзБрж░": ["рж░ржВржкрзБрж░ рж╕ржжрж░", "ржмржжрж░ржЧржЮрзНржЬ", "ржЧржЩрзНржЧрж╛ржЪржбрж╝рж╛", "ржХрж╛ржЙржирж┐ржпрж╝рж╛", "ржорж┐ржарж╛ржкрзБржХрзБрж░", "ржкрзАрж░ржЧрж╛ржЫрж╛", "ржкрзАрж░ржЧржЮрзНржЬ", "рждрж╛рж░рж╛ржЧржЮрзНржЬ"],
    "ржарж╛ржХрзБрж░ржЧрж╛ржБржУ": ["ржарж╛ржХрзБрж░ржЧрж╛ржБржУ рж╕ржжрж░", "ржмрж╛рж▓рж┐ржпрж╝рж╛ржбрж╛ржЩрзНржЧрзА", "рж╣рж░рж┐ржкрзБрж░", "ржкрзАрж░ржЧржЮрзНржЬ", "рж░рж╛ржирзАрж╢ржВржХрзИрж▓"],
    // ржоржпрж╝ржоржирж╕рж┐ржВрж╣ ржмрж┐ржнрж╛ржЧ
    "ржЬрж╛ржорж╛рж▓ржкрзБрж░": ["ржЬрж╛ржорж╛рж▓ржкрзБрж░ рж╕ржжрж░", "ржмржХрж╢рзАржЧржЮрзНржЬ", "ржжрзЗржУржпрж╝рж╛ржиржЧржЮрзНржЬ", "ржЗрж╕рж▓рж╛ржоржкрзБрж░", "ржорж╛ржжрж╛рж░ржЧржЮрзНржЬ", "ржорзЗрж▓рж╛ржирзНржжрж╣", "рж╕рж░рж┐рж╖рж╛ржмрж╛ржбрж╝рзА"],
    "ржоржпрж╝ржоржирж╕рж┐ржВрж╣": ["ржоржпрж╝ржоржирж╕рж┐ржВрж╣ рж╕ржжрж░", "ржнрж╛рж▓рзБржХрж╛", "ржзрзЛржмрж╛ржЙржбрж╝рж╛", "ржлрзБрж▓ржмрж╛ржбрж╝рзАржпрж╝рж╛", "ржЧржлрж░ржЧрж╛ржБржУ", "ржЧрзМрж░рзАржкрзБрж░", "рж╣рж╛рж▓рзБржпрж╝рж╛ржШрж╛ржЯ", "ржИрж╢рзНржмрж░ржЧржЮрзНржЬ", "ржорзБржХрзНрждрж╛ржЧрж╛ржЫрж╛", "ржирж╛ржирзНржжрж╛ржЗрж▓", "ржлрзБрж▓ржкрзБрж░", "рждрж╛рж░рж╛ржХрж╛ржирзНржжрж╛", "рждрзНрж░рж┐рж╢рж╛рж▓"],
    "ржирзЗрждрзНрж░ржХрзЛржирж╛": ["ржирзЗрждрзНрж░ржХрзЛржирж╛ рж╕ржжрж░", "ржмрж╛рж░рж╣рж╛ржЯрзНржЯрж╛", "ржжрзБрж░рзНржЧрж╛ржкрзБрж░", "ржХрзЗржирзНржжрзБржпрж╝рж╛", "ржХрж▓ржорж╛ржХрж╛ржирзНржжрж╛", "ржоржжржи", "ржорзЛрж╣ржиржЧржЮрзНржЬ", "ржкрзВрж░рзНржмржзрж▓рж╛", "ржЦрж╛рж▓рж┐ржпрж╝рж╛ржЬрзБрж░рзА", "ржЖржЯржкрж╛ржбрж╝рж╛"],
    "рж╢рзЗрж░ржкрзБрж░": ["рж╢рзЗрж░ржкрзБрж░ рж╕ржжрж░", "ржЭрж┐ржирж╛ржЗржЧрж╛рждрзА", "ржиржХрж▓рж╛", "ржирж╛рж▓рж┐рждрж╛ржмрж╛ржбрж╝рзА", "рж╢рзНрж░рзАржмрж░ржжрзА"]
};


// --- App State ---
let CART = [];
let SELECTED_PRODUCT = null;

// --- DOM References ---
const productGrid = document.getElementById('product-grid');
const cartBtn = document.getElementById('cart-btn');
const cartItemCountEl = document.getElementById('cart-item-count');
const modalsContainer = document.getElementById('modals-container');
const toastEl = document.getElementById('toast');
const toastTitleEl = document.getElementById('toast-title');
const toastDescriptionEl = document.getElementById('toast-description');
const themeToggleBtn = document.getElementById('theme-toggle-btn');
const themeIconSun = document.getElementById('theme-icon-sun');
const themeIconMoon = document.getElementById('theme-icon-moon');

// --- Utility ---
function showToast(title, description, variant = 'default') {
  toastTitleEl.textContent = title;
  toastDescriptionEl.textContent = description;
  toastEl.classList.remove('destructive');
  if (variant === 'destructive') toastEl.classList.add('destructive');
  toastEl.classList.add('show');
  setTimeout(() => { toastEl.classList.remove('show'); }, 3500);
}
function openModal(html) {
  const w = document.createElement('div');
  w.innerHTML = html;
  modalsContainer.appendChild(w.firstElementChild);
  setTimeout(() => modalsContainer.lastElementChild.classList.remove('hidden'), 10);
  document.body.style.overflow = 'hidden';
}
function closeModal(modalEl) {
  modalEl.classList.add('hidden');
  setTimeout(() => {
    modalEl.remove();
    if (modalsContainer.children.length === 0) document.body.style.overflow = '';
  }, 300);
}
function updateCartCount() {
  const count = CART.reduce((s, i) => s + i.quantity, 0);
  cartItemCountEl.textContent = count;
  cartItemCountEl.classList.toggle('hidden', count === 0);
}
function getCartItem(id) {
  return CART.find(i => i.id === id);
}

// --- Google Sheet Data Submission ---
async function submitToGoogleSheet(data) {
    if (SPREADSHEET_URL === "YOUR_GOOGLE_SHEET_WEB_APP_URL_HERE" || !SPREADSHEET_URL) {
        console.error("Google Sheet URL is not set.");
        showToast("рждрзНрж░рзБржЯрж┐", "рж╕рж╛рж░рзНржнрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕ржарж┐ржХ ржирзЯред", "destructive");
        return false;
    }
    const formData = new FormData();
    for (const key in data) {
        formData.append(key, data[key]);
    }
    try {
        const response = await fetch(SPREADSHEET_URL, {
            method: 'POST',
            body: formData,
        });
        const result = await response.json();
        if (result.status !== 'success') {
             throw new Error(result.message);
        }
        return true;
    } catch (error) {
        console.error('Error submitting to Google Sheet:', error);
        showToast("рждрзНрж░рзБржЯрж┐", "ржЕрж░рзНржбрж╛рж░ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯрзЗржЫрзЗред", "destructive");
        return false;
    }
}

// --- RENDER FUNCTIONS ---
function renderProducts() {
  productGrid.innerHTML = PRODUCTS.map(p => `
  <div class="card-modern group cursor-pointer overflow-hidden animate-fade-in" data-product-id="${p.id}">
    <div class="p-0">
      <div class="relative overflow-hidden" data-action="preview">
        <img src="${p.image}" alt="${p.name}" class="w-full aspect-square object-cover transition-transform duration-500 group-hover:scale-110" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        
        ${p.freeDelivery ? `
          <div class="absolute top-4 right-4 h-20 w-20 bg-red-500 rounded-full flex items-center justify-center text-white font-bold text-center leading-tight shadow-lg animate-pulse z-10">
            <span class="text-lg">ржлрзНрж░рж┐<br>ржбрзЗрж▓рж┐ржнрж╛рж░рж┐</span>
          </div>
        ` : ''}

        <button class="absolute top-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-secondary text-secondary-foreground text-sm px-3 py-1 rounded-md flex items-center gap-1 z-10" data-action="preview">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
          ржжрзЗржЦрзБржи
        </button>
      </div>
      <div class="p-6">
        <div class="space-y-4">
          <div>
            <h3 class="text-xl font-bold text-foreground group-hover:text-primary transition-colors duration-300">${p.name}</h3>
            <div class="flex items-center justify-between mt-2">
              <span class="bg-gradient-secondary text-secondary-foreground font-bold text-lg px-3 py-1 rounded-md">рз│${p.price}</span>
              <span class="text-sm text-green-600 font-medium">рж╕рзНржЯржХрзЗ ржЖржЫрзЗ</span>
            </div>
          </div>
          <div class="space-y-2">
            ${p.features.map(f => `<div class="flex items-center gap-2 text-sm text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500 flex-shrink-0"><polyline points="20 6 9 17 4 12"></polyline></svg><span>${f}</span></div>`).join('')}
          </div>
          <div class="flex gap-2 pt-2">
            <button class="btn-primary flex-1 py-3 px-4 rounded-md text-base" data-action="order">ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржи</button>
            <button class="btn-ghost py-3 px-4 rounded-md text-base flex items-center justify-center gap-1" data-action="add_to_cart">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
              ржХрж╛рж░рзНржЯ
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  `).join('');
}

function renderPreviewModal(product) {
  return `
  <div class="modal-overlay hidden" data-product-id="${product.id}">
    <div class="modal-content card-modern max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4 rounded-lg">
      <div class="p-6">
        <h2 class="text-2xl font-bold text-gradient mb-4">ржкржгрзНржпрзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <div class="space-y-4">
            <div class="relative overflow-hidden rounded-xl">
              <img src="${product.image}" alt="${product.name}" class="w-full aspect-square object-cover hover:scale-105 transition-transform duration-500" />
              <div class="absolute top-4 left-4"><span class="bg-success text-success-foreground text-xs px-2 py-1 rounded-md">рж╕рзНржЯржХрзЗ ржЖржЫрзЗ</span></div>
              ${product.freeDelivery ? `<div class="absolute top-4 right-4"><span class="bg-destructive text-destructive-foreground text-base font-extrabold px-4 py-2 rounded-lg shadow-xl animate-pulse">тЪб ржлрзНрж░рж┐ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ тЪб</span></div>` : ''}
            </div>
            <div class="flex items-center gap-2">
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="text-yellow-400"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="text-yellow-400"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="text-yellow-400"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="text-yellow-400"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="text-yellow-400"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>
              </div>
              <span class="text-sm text-muted-foreground">(4.8 рж░рзЗржЯрж┐ржВ)</span>
            </div>
          </div>
          <div class="space-y-6">
            <div>
              <h2 class="text-2xl font-bold text-foreground mb-3">${product.name}</h2>
              <div class="flex items-center gap-4 mb-4">
                <span class="bg-gradient-secondary text-secondary-foreground font-bold text-xl px-4 py-2 rounded-md">рз│${product.price}</span>
                <span class="text-sm text-muted-foreground line-through">рз│${Math.round(product.price * 1.2)}</span>
                <span class="bg-destructive text-destructive-foreground text-xs px-2 py-1 rounded-md">20% ржЫрж╛ржбрж╝</span>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-foreground mb-2">ржмрж┐ржмрж░ржг</h3>
              <p class="text-muted-foreground leading-relaxed">${product.description}</p>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-foreground mb-3">ржмрзИрж╢рж┐рж╖рзНржЯрзНржпрж╕ржорзВрж╣</h3>
              <div class="space-y-3">${product.features.map(f => `<div class="flex items-center gap-3"><div class="w-6 h-6 bg-success/10 rounded-full flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-success"><polyline points="20 6 9 17 4 12"></polyline></svg></div><span class="text-foreground">${f}</span></div>`).join('')}</div>
            </div>
            <div class="p-4 bg-gradient-subtle rounded-lg border border-border/50">
              <h4 class="font-semibold text-foreground mb-2">ржЧрзБржгржЧржд ржорж╛ржирзЗрж░ ржирж┐рж╢рзНржЪржпрж╝рждрж╛</h4>
              <ul class="text-sm text-muted-foreground space-y-1">
                <li>тЬУ 100% ржЦрж╛ржБржЯрж┐ ржУ ржкрзНрж░рж╛ржХрзГрждрж┐ржХ ржЙржкрж╛ржжрж╛ржи</li>
                <li>тЬУ ржЧрзБржгржЧржд ржорж╛ржи ржкрж░рзАржХрзНрж╖рж┐ржд</li>
                <li>тЬУ ржжрзНрж░рзБржд ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржирж┐рж╢рзНржЪржпрж╝рждрж╛</li>
              </ul>
            </div>
            <div class="flex gap-4 pt-4">
              <button data-action="orderFromPreview" class="btn-primary flex-1 text-lg py-3 rounded-md">ржПржЦржиржЗ ржЕрж░рзНржбрж╛рж░ ржХрж░рзБржи</button>
              <button data-action="addToCartFromPreview" class="btn-ghost flex-1 text-lg py-3 rounded-md flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                ржХрж╛рж░рзНржЯрзЗ ржпрзЛржЧ ржХрж░рзБржи
              </button>
            </div>
            <div class="text-center text-sm text-muted-foreground pt-4 border-t border-border">
              <p>рж╕рж░рж╛рж╕рж░рж┐ ржЕрж░рзНржбрж╛рж░ ржХрж░рждрзЗ ржХрж▓ ржХрж░рзБржи: <span class="font-bold text-primary">+8809638180218</span></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>`;
}

function renderOrderModal(product, quantity) {
  const productTotal = product.price * quantity;
  return `
  <div class="modal-overlay hidden" id="order-modal">
    <div class="modal-content card-modern max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4 rounded-lg">
    <div class="p-6 space-y-6"><h2 class="text-2xl font-bold text-gradient">ржЕрж░рзНржбрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзБржи</h2>
    <div class="flex gap-4 p-4 bg-muted/30 rounded-lg"><img src="${product.image}" alt="${product.name}" class="w-20 h-20 object-cover rounded-lg" /><div class="flex-1"><h4 class="font-bold text-foreground">${product.name}</h4><p class="text-success font-bold">рз│${product.price}</p></div></div>
    <form id="single-order-form" class="space-y-4"><div class="space-y-2"><label class="text-sm font-medium">ржкрж░рж┐ржорж╛ржг</label><div class="flex items-center gap-3"><button type="button" id="single-qty-dec-btn" data-action="dec-single-qty" class="h-8 w-8 border rounded-md flex items-center justify-center">-</button><span id="quantity-value" class="w-12 text-center text-lg font-medium">${quantity}</span><button type="button" data-action="inc-single-qty" class="h-8 w-8 border rounded-md flex items-center justify-center">+</button><span id="product-subtotal" class="ml-4 text-sm text-muted-foreground">рж╕рж╛ржмржЯрзЛржЯрж╛рж▓: рз│${productTotal}</span></div></div><hr/>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="customerName" class="text-sm font-medium">ржЖржкржирж╛рж░ ржирж╛ржо *</label><input type="text" id="customerName" name="customerName" required minlength="3" placeholder="ржирж╛ржо рж▓рж┐ржЦрзБржи" class="w-full p-2 border rounded-md bg-input" /></div><div class="space-y-2"><label for="phoneNumber" class="text-sm font-medium">ржлрзЛржи ржиржорзНржмрж░ *</label><input type="tel" id="phoneNumber" name="phoneNumber" required minlength="11" maxlength="14" pattern="^\\+?\\d{10,13}$" title="ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ + рж╕рж╣ ржмрж╛ ржЫрж╛ржбрж╝рж╛ рззрзз ржерзЗржХрзЗ рззрзк ржЕржХрзНрж╖рж░рзЗрж░ ржПржХржЯрж┐ ржмрзИржз ржлрзЛржи ржиржорзНржмрж░ ржжрж┐ржиред" placeholder="+88017xxxxxxxx" class="w-full p-2 border rounded-md bg-input" /></div></div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="space-y-2"><label for="division" class="text-sm font-medium">ржмрж┐ржнрж╛ржЧ *</label><select name="division" required class="w-full p-2 border rounded-md bg-input"><option value="" disabled selected>ржмрж┐ржнрж╛ржЧ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>${Object.keys(DIVISIONS_AND_DISTRICTS).map(div => `<option value="${div}">${div}</option>`).join('')}</select></div>
        <div class="space-y-2"><label for="district" class="text-sm font-medium">ржЬрзЗрж▓рж╛ *</label><select name="district" required class="w-full p-2 border rounded-md bg-input" disabled><option value="" disabled selected>ржЖржЧрзЗ ржмрж┐ржнрж╛ржЧ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option></select></div>
        <div class="space-y-2"><label for="thana" class="text-sm font-medium">ржерж╛ржирж╛/ржЙржкржЬрзЗрж▓рж╛ *</label><select name="thana" required class="w-full p-2 border rounded-md bg-input" disabled><option value="" disabled selected>ржЖржЧрзЗ ржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option></select></div>
    </div>
    <div class="space-y-2"><label for="address" class="text-sm font-medium">ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржарж┐ржХрж╛ржирж╛ *</label><input type="text" id="address" name="address" required placeholder="ржмрж╛рзЬрж┐рж░ ржиржорзНржмрж░, рж░рж╛рж╕рзНрждрж╛, ржПрж▓рж╛ржХрж╛/ржЧрзНрж░рж╛ржо ржЗрждрзНржпрж╛ржжрж┐ рж▓рж┐ржЦрзБржи" class="w-full p-2 border rounded-md bg-input" /></div>
    <hr/>
    <div class="space-y-2 p-4 bg-gradient-subtle rounded-lg"><div id="delivery-charge-row" class="flex justify-between text-sm" style="display: none;"><span>ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ:</span><span id="delivery-charge">рз│0</span></div><hr/><div class="flex justify-between text-lg font-bold text-gradient"><span>ржорзЛржЯ:</span><span id="total-amount">рз│${productTotal}</span></div></div>
    <button type="submit" class="w-full btn-primary text-lg py-3 rounded-md">ржЕрж░рзНржбрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзБржи</button></form></div></div></div>`;
}

function renderCartModal() {
  const subtotal = CART.reduce((s, i) => s + i.price * i.quantity, 0);
  return `
  <div class="modal-overlay hidden" id="cart-modal">
    <div class="modal-content card-modern max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4 rounded-lg">
    <div class="p-6 space-y-6"><h2 class="text-2xl font-bold text-gradient">ржЖржкржирж╛рж░ рж╢ржкрж┐ржВ ржХрж╛рж░рзНржЯ</h2>
    ${CART.length === 0 ? `<div class="text-center py-12"><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-muted-foreground mb-4"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-2z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg><h3 class="text-lg font-medium text-foreground mb-2">ржЖржкржирж╛рж░ ржХрж╛рж░рзНржЯ ржЦрж╛рж▓рж┐</h3><p class="text-muted-foreground">ржХрзЗржирж╛ржХрж╛ржЯрж╛ рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкржгрзНржп ржпрзЛржЧ ржХрж░рзБржи</p></div>` :
      `<div class="space-y-4">${CART.map(i => `<div class="flex items-center justify-between p-4 bg-muted/30 rounded-lg" data-item-id="${i.id}"><div class="flex-1"><h4 class="font-medium text-foreground">${i.name}</h4><p class="text-sm text-muted-foreground">рз│${i.price} ржкрзНрж░рждрж┐ржЯрж┐</p></div><div class="flex items-center gap-3"><div class="flex items-center gap-2"><button data-action="dec-qty" class="h-8 w-8 border rounded-md flex items-center justify-center">-</button><span id="item-qty" class="w-8 text-center font-medium">${i.quantity}</span><button data-action="inc-qty" class="h-8 w-8 border rounded-md flex items-center justify-center">+</button></div><div class="w-20 text-right"><span id="item-total" class="font-bold">рз│${i.price * i.quantity}</span></div><button data-action="remove-item" class="h-8 w-8 text-destructive hover:text-destructive flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></button></div></div>`).join('')}</div><hr/>
      <form id="cart-order-form" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="customerName" class="text-sm font-medium">ржЖржкржирж╛рж░ ржирж╛ржо *</label><input type="text" id="customerName" name="customerName" required minlength="3" placeholder="ржирж╛ржо рж▓рж┐ржЦрзБржи" class="w-full p-2 border rounded-md bg-input" /></div><div class="space-y-2"><label for="phoneNumber" class="text-sm font-medium">ржлрзЛржи ржиржорзНржмрж░ *</label><input type="tel" id="phoneNumber" name="phoneNumber" required minlength="11" maxlength="14" pattern="^\\+?\\d{10,13}$" title="ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ + рж╕рж╣ ржмрж╛ ржЫрж╛ржбрж╝рж╛ рззрзз ржерзЗржХрзЗ рззрзк ржЕржХрзНрж╖рж░рзЗрж░ ржПржХржЯрж┐ ржмрзИржз ржлрзЛржи ржиржорзНржмрж░ ржжрж┐ржиред" placeholder="+88017xxxxxxxx" class="w-full p-2 border rounded-md bg-input" /></div></div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="space-y-2"><label for="division" class="text-sm font-medium">ржмрж┐ржнрж╛ржЧ *</label><select name="division" required class="w-full p-2 border rounded-md bg-input"><option value="" disabled selected>ржмрж┐ржнрж╛ржЧ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>${Object.keys(DIVISIONS_AND_DISTRICTS).map(div => `<option value="${div}">${div}</option>`).join('')}</select></div>
            <div class="space-y-2"><label for="district" class="text-sm font-medium">ржЬрзЗрж▓рж╛ *</label><select name="district" required class="w-full p-2 border rounded-md bg-input" disabled><option value="" disabled selected>ржЖржЧрзЗ ржмрж┐ржнрж╛ржЧ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option></select></div>
            <div class="space-y-2"><label for="thana" class="text-sm font-medium">ржерж╛ржирж╛/ржЙржкржЬрзЗрж▓рж╛ *</label><select name="thana" required class="w-full p-2 border rounded-md bg-input" disabled><option value="" disabled selected>ржЖржЧрзЗ ржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option></select></div>
        </div>
        <div class="space-y-2"><label for="address" class="text-sm font-medium">ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржарж┐ржХрж╛ржирж╛ *</label><input type="text" id="address" name="address" required placeholder="ржмрж╛рзЬрж┐рж░ ржиржорзНржмрж░, рж░рж╛рж╕рзНрждрж╛, ржПрж▓рж╛ржХрж╛/ржЧрзНрж░рж╛ржо ржЗрждрзНржпрж╛ржжрж┐ рж▓рж┐ржЦрзБржи" class="w-full p-2 border rounded-md bg-input" /></div>
        <hr/>
        <div class="space-y-2 p-4 bg-gradient-subtle rounded-lg"><div class="flex justify-between text-sm"><span>рж╕рж╛ржмржЯрзЛржЯрж╛рж▓:</span><span id="cart-subtotal">рз│${subtotal}</span></div><div id="delivery-charge-row" class="flex justify-between text-sm" style="display: none;"><span>ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ:</span><span id="delivery-charge">рз│0</span></div><hr/><div class="flex justify-between text-lg font-bold text-gradient"><span>ржорзЛржЯ:</span><span id="total-amount">рз│${subtotal}</span></div></div>
        <button type="submit" class="w-full btn-primary text-lg py-3 rounded-md">ржЕрж░рзНржбрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзБржи</button>
      </form></div>`}
    </div></div>
  </div>`;
}

function getThankYouModalHTML() {
  return `
  <div class="modal-overlay flex items-center justify-center p-4">
    <div class="modal-content card-modern max-w-md w-full text-center py-8 px-6">
      <div class="mx-auto w-16 h-16 bg-success/10 rounded-full flex items-center justify-center mb-4"> <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-success"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-2z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg> </div>
      <h3 class="text-xl font-bold text-foreground mb-2">ржЕрж░рзНржбрж╛рж░ рж╕ржлрж▓!</h3>
      <p class="text-muted-foreground">ржЖржкржирж╛рж░ ржЕрж░рзНржбрж╛рж░ржЯрж┐ ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржорж░рж╛ рж╢рзАржШрзНрж░ржЗ ржЖржкржирж╛рж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░ржмред ЁЯШК</p>
    </div>
  </div>`;
}

// --- Events + Logic ---
productGrid.addEventListener('click', e => {
  const card = e.target.closest('[data-product-id]');
  if (!card) return;
  const productId = card.dataset.productId;
  const product = PRODUCTS.find(p => p.id === productId);
  SELECTED_PRODUCT = product;
  const action = e.target.dataset.action || e.target.closest('[data-action]')?.dataset.action;

  if (action === 'add_to_cart') {
    const existing = CART.find(i => i.id === product.id);
    if (existing) existing.quantity += 1;
    else CART.push({ id: product.id, name: product.name, price: product.price, quantity: 1, image: product.image });
    updateCartCount();
    showToast("ржХрж╛рж░рзНржЯрзЗ ржпрзЛржЧ рж╣ржпрж╝рзЗржЫрзЗ!", `${product.name} рж╕ржлрж▓ржнрж╛ржмрзЗ ржХрж╛рж░рзНржЯрзЗ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред`);
  } else if (action === 'order') {
    openModal(renderOrderModal(product, 1));
  } else if (action === 'preview') {
    openModal(renderPreviewModal(product));
  }
});

cartBtn.addEventListener('click', () => { openModal(renderCartModal()); });

async function handleFormSubmission(form, modal, type) {
    const submitBtn = form.querySelector('button[type="submit"]');
    if (!form.checkValidity()) {
        showToast("рждрзНрж░рзБржЯрж┐", "ржжржпрж╝рж╛ ржХрж░рзЗ ржлрж░рзНржорзЗрж░ рж╕ржорж╕рзНржд рждржерзНржп рж╕ржарж┐ржХржнрж╛ржмрзЗ ржкрзВрж░ржг ржХрж░рзБржиред", "destructive");
        form.reportValidity();
        return;
    }

    if (!form.division.value || !form.district.value || !form.thana.value) {
        showToast("рждрзНрж░рзБржЯрж┐", "ржжржпрж╝рж╛ ржХрж░рзЗ ржЖржкржирж╛рж░ ржмрж┐ржнрж╛ржЧ, ржЬрзЗрж▓рж╛ ржПржмржВ ржерж╛ржирж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржиред", "destructive");
        return;
    }

    submitBtn.disabled = true;
    submitBtn.textContent = 'ржкрзНрж░рж╕рзЗрж╕рж┐ржВ...';
    
    const totalAmountText = form.querySelector('#total-amount').textContent;
    const totalAmount = parseFloat(totalAmountText.replace('рз│', ''));

    let itemsData;
    let isFreeDelivery = false;

    if (type === 'single') {
        const quantity = parseInt(form.querySelector('#quantity-value').textContent, 10);
        itemsData = `${SELECTED_PRODUCT.name} (ржкрж░рж┐ржорж╛ржг: ${quantity})`;
        isFreeDelivery = SELECTED_PRODUCT.freeDelivery || false;
    } else { // type === 'cart'
        itemsData = CART.map(item => `${item.name} (ржкрж░рж┐ржорж╛ржг: ${item.quantity})`).join(', ');
        isFreeDelivery = CART.length > 0 && CART.every(cartItem => {
            const product = PRODUCTS.find(p => p.id === cartItem.id);
            return product && product.freeDelivery;
        });
    }
    
    const fullAddress = `${form.address.value}, ржерж╛ржирж╛: ${form.thana.value}, ржЬрзЗрж▓рж╛: ${form.district.value}, ржмрж┐ржнрж╛ржЧ: ${form.division.value}`;
    
    let deliveryLocationText = 'Not Applicable';
    if(isFreeDelivery) {
        deliveryLocationText = 'Free Delivery Offer';
    } else if (form.district.value) {
        deliveryLocationText = form.district.value === 'ржврж╛ржХрж╛' ? 'Inside Dhaka District (70)' : 'Outside Dhaka District (130)';
    }
    
    const orderData = {
        customerName: form.customerName.value,
        phoneNumber: form.phoneNumber.value,
        address: fullAddress,
        deliveryLocation: deliveryLocationText,
        items: itemsData,
        totalAmount: totalAmount,
    };

    const success = await submitToGoogleSheet(orderData);

    if (success) {
        closeModal(modal);
        openModal(getThankYouModalHTML());
        setTimeout(() => closeModal(modalsContainer.lastElementChild), 3000);
        if (type === 'cart') {
            CART = [];
            updateCartCount();
        }
    }
    
    submitBtn.disabled = false;
    submitBtn.textContent = 'ржЕрж░рзНржбрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░рзБржи';
}

modalsContainer.addEventListener('change', e => {
    const form = e.target.closest('form');
    if (!form) return;
    
    const formType = form.id.startsWith('cart') ? 'cart' : 'single';
    const districtSelect = form.querySelector('select[name="district"]');
    const thanaSelect = form.querySelector('select[name="thana"]');

    if (e.target.name === 'division') {
        const division = e.target.value;
        
        districtSelect.innerHTML = '<option value="" disabled selected>ржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>';
        thanaSelect.innerHTML = '<option value="" disabled selected>ржЖржЧрзЗ ржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>';
        thanaSelect.disabled = true;
        
        if (division && DIVISIONS_AND_DISTRICTS[division]) {
            DIVISIONS_AND_DISTRICTS[division].forEach(district => {
                const option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            });
            districtSelect.disabled = false;
        } else {
            districtSelect.disabled = true;
        }
        districtSelect.value = '';
        thanaSelect.value = '';
        updatePriceSummary(form, formType);
    }

    if (e.target.name === 'district') {
        const district = e.target.value;

        thanaSelect.innerHTML = '<option value="" disabled selected>ржерж╛ржирж╛/ржЙржкржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>';
        
        if (district && DISTRICTS_AND_THANAS[district]) {
            DISTRICTS_AND_THANAS[district].forEach(thana => {
                const option = document.createElement('option');
                option.value = thana;
                option.textContent = thana;
                thanaSelect.appendChild(option);
            });
            thanaSelect.disabled = false;
        } else {
            thanaSelect.disabled = true;
        }
        thanaSelect.value = '';
        updatePriceSummary(form, formType);
    }
});

modalsContainer.addEventListener('click', async e => {
  const modal = e.target.closest('.modal-overlay');
  if (!modal) return;
  if (e.target === modal) closeModal(modal);

  const action = e.target.dataset.action || e.target.closest('[data-action]')?.dataset.action;
  const form = e.target.closest('form');

  if (form && e.target.type === 'submit') {
      e.preventDefault();
      if (form.id === 'cart-order-form') {
          await handleFormSubmission(form, modal, 'cart');
      } else if (form.id === 'single-order-form') {
          await handleFormSubmission(form, modal, 'single');
      }
  }

  if (action?.includes('single-qty')) {
    const qtyEl = modal.querySelector('#quantity-value');
    let qty = parseInt(qtyEl.textContent, 10);
    if (action === 'inc-single-qty') qty++;
    else if (action === 'dec-single-qty' && qty > 1) qty--;
    qtyEl.textContent = qty;
    modal.querySelector('#single-qty-dec-btn').disabled = (qty <= 1);
    updatePriceSummary(form, 'single');
  } else if (action?.includes('qty')) {
    const itemEl = e.target.closest('[data-item-id]');
    if (!itemEl) return;
    const itemId = itemEl.dataset.itemId;
    const item = CART.find(i => i.id === itemId);
    if (!item) return;
    if (action === 'inc-qty') item.quantity++;
    else if (action === 'dec-qty' && item.quantity > 1) item.quantity--;
    else if (action === 'dec-qty' && item.quantity === 1) { CART = CART.filter(i => i.id !== itemId); itemEl.remove(); }
    if (item) {
      itemEl.querySelector('#item-qty').textContent = item.quantity;
      itemEl.querySelector('#item-total').textContent = `рз│${item.price * item.quantity}`;
    }
    updatePriceSummary(modal.querySelector('form'), 'cart');
    updateCartCount();
  }

  if (action === 'remove-item') {
    const itemId = e.target.closest('[data-item-id]').dataset.itemId;
    CART = CART.filter(i => i.id !== itemId);
    e.target.closest('[data-item-id]').remove();
    if (CART.length === 0) {
      closeModal(modal);
      openModal(renderCartModal());
    } else {
        updatePriceSummary(modal.querySelector('form'), 'cart');
    }
    updateCartCount();
  }
  
  if (action === 'orderFromPreview') {
    SELECTED_PRODUCT = PRODUCTS.find(p => p.id === e.target.closest('[data-product-id]').dataset.productId);
    closeModal(modal);
    openModal(renderOrderModal(SELECTED_PRODUCT, 1));
  }
  if (action === 'addToCartFromPreview') {
    const product = PRODUCTS.find(p => p.id === e.target.closest('[data-product-id]').dataset.productId);
    const existing = CART.find(i => i.id === product.id);
    if (existing) existing.quantity += 1;
    else CART.push({ id: product.id, name: product.name, price: product.price, quantity: 1, image: product.image });
    updateCartCount();
    showToast("ржХрж╛рж░рзНржЯрзЗ ржпрзЛржЧ рж╣ржпрж╝рзЗржЫрзЗ!", `${product.name} рж╕ржлрж▓ржнрж╛ржмрзЗ ржХрж╛рж░рзНржЯрзЗ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред`);
    closeModal(modal);
  }
});

function updatePriceSummary(form, type) {
    if (!form) return;
    const selectedDistrict = form.querySelector('select[name="district"]').value;
    let deliveryCharge = 0;
    let subtotal;
    let isFreeDelivery = false;

    if (type === 'single') {
        const quantity = parseInt(form.querySelector('#quantity-value').textContent, 10);
        subtotal = SELECTED_PRODUCT.price * quantity;
        form.querySelector('#product-subtotal').textContent = `рж╕рж╛ржмржЯрзЛржЯрж╛рж▓: рз│${subtotal}`;
        if (SELECTED_PRODUCT.freeDelivery) {
            isFreeDelivery = true;
        }
    } else { // type === 'cart'
        subtotal = CART.reduce((sum, item) => sum + item.price * item.quantity, 0);
        form.querySelector('#cart-subtotal').textContent = `рз│${subtotal}`;
        const allItemsFreeDelivery = CART.every(cartItem => {
            const product = PRODUCTS.find(p => p.id === cartItem.id);
            return product && product.freeDelivery;
        });
        if (CART.length > 0 && allItemsFreeDelivery) {
            isFreeDelivery = true;
        }
    }
    
    if (selectedDistrict && !isFreeDelivery) {
        deliveryCharge = selectedDistrict === 'ржврж╛ржХрж╛' ? 70 : 130;
    }
    
    const total = subtotal + deliveryCharge;
    const deliveryChargeEl = form.querySelector('#delivery-charge');

    if (isFreeDelivery) {
        deliveryChargeEl.textContent = 'ржлрзНрж░рж┐';
        deliveryChargeEl.classList.add('text-success', 'font-bold');
    } else {
        deliveryChargeEl.textContent = `рз│${deliveryCharge}`;
        deliveryChargeEl.classList.remove('text-success', 'font-bold');
    }
    
    form.querySelector('#total-amount').textContent = `рз│${total}`;
    form.querySelector('#delivery-charge-row').style.display = selectedDistrict || isFreeDelivery ? 'flex' : 'none';
}

// --- THEME ---
function updateTheme() {
  const isDark = document.documentElement.classList.contains('dark');
  themeIconSun.classList.toggle('hidden', !isDark);
  themeIconMoon.classList.toggle('hidden', isDark);
}
themeToggleBtn.addEventListener('click', () => { document.documentElement.classList.toggle('dark'); updateTheme(); });

// --- INIT ---
renderProducts();
updateTheme();
updateCartCount();